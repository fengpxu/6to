(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"3a3f":function(t,e,l){"use strict";l("507c")},"3e18":function(t,e,l){"use strict";l.r(e);var o=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{ref:"scrollEl",staticClass:"library-following row justify-center",class:{web:!t.isElectron}},[t._l(t.filteredChannels,(function(e){return l("ChannelCard",{key:e.id,attrs:{id:e.id,title:e.title,description:e.description,image:e.image,soul:e.soul,hidden:e.hidden,followers:t.lib.channelFollowerCount[e.id],followable:!1,blocked:t.blockMap[e.id]},on:{detail:t.showChannelDetail,follow:t.unfollow}})})),l("i"),l("i"),l("i"),l("i"),l("i"),l("i"),l("i"),l("i"),t.followings.length?t._e():l("div",{staticClass:"no-data"},[l("q-btn",{staticClass:"no-data-btn",attrs:{round:"",color:"primary","text-color":"primary",icon:"arrow_forward",size:"24px"},on:{click:t.goToExplore}},[l("q-tooltip",[t._v(t._s(t.$t("no_following"))+" "+t._s(t.$t("lib_explore")))])],1)],1),l("BackToTop",{attrs:{show:t.scrollOffset>0},on:{click:t.scrollTop}}),l("SearchChannel",{attrs:{higher:t.scrollOffset>0}})],2)},s=[],i=l("4aad"),n=l("5ea8"),a=l("6277"),r=l("1c16"),c=l("0ebe"),h=l("ed08"),f=l("e64e"),d=l("bae3"),u={name:"LibraryFollowing",components:{ChannelCard:n["a"],SearchChannel:a["a"],BackToTop:c["a"]},mixins:[f["a"]],data(){return{isElectron:Object(h["isElectron"])(),scrollOffset:0,lib:i["a"]}},computed:{followings(){return this.lib.followingChannels.filter((t=>!i["a"].isBannedChannel(t)&&(t.title&&t.id)))},blockMap(){const t={};return i["a"].userData&&i["a"].userData.blockChannels?(this.followings.forEach((e=>{(i["a"].userData.blockChannels.includes(e.id)||i["a"].userData.blockUsers.includes(e.creator))&&(t[e.id]=!0)})),t):t},filteredChannels(){const t=this.searchText.toLowerCase();if(!t)return this.followings;const e=i["a"].search.option.value,l=t=>{switch(e){case"channelID":return t.id;default:return t.title}},o=e=>{const o=l(e);return Object(d["a"])(null===o||void 0===o?void 0:o.toLowerCase()).includes(t)};return this.followings.filter(o)}},methods:{scrollTop(){this.$refs.scrollEl.scrollTo(0,0)},showChannelDetail(t){const e=this.followings.find((e=>e.id===t));console.log("to",e);const l=["id","title"].map((t=>{const l=e[t];return encodeURIComponent(t)+"="+encodeURIComponent(l)})).join("&"),o=`/library/channel?${l}`;this.$root.$emit("navigate-to",o),this.$router.push(o)},unfollow(t){this.$q.dialog({title:this.$t("unfollow"),message:this.$t("unfollow_confirm"),ok:this.$t("unfollow"),cancel:this.$t("cancel")}).onOk((()=>{i["a"].unfollowChannel(t)}))},goToExplore(){this.$root.$emit("navigate-to"),this.$router.push("/library/explore")},setSearch(){this.lib.setSearchOption([{label:this.$t("title"),value:"channel"},{label:this.$t("channel_id"),value:"channelID"}])}},activated(){this.setSearch(),this.$root.$emit("navigate-to"),this.$root.$emit("navigate-to","/library/following"),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.scrollTo(0,this.scrollOffset)},mounted(){this.setSearch(),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.addEventListener("scroll",Object(r["a"])((()=>{this.scrollOffset=this.$refs.scrollEl.scrollTop})))},watch:{searchText(t){t&&this.active&&this.scrollTop()}}},w=u,p=(l("3a3f"),l("2877")),b=l("9c40"),$=l("05c0"),g=l("eebe"),C=l.n(g),m=Object(p["a"])(w,o,s,!1,null,"39c3b786",null);e["default"]=m.exports;C()(m,"components",{QBtn:b["a"],QTooltip:$["a"]})},"507c":function(t,e,l){}}]);