(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"4c0a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.lib.currentCreator?a("div",{ref:"scrollArea",staticClass:"library-creator q-pa-md q-pb-lg"},[a("q-card",{staticClass:"creator-info relative-position overflow-hidden q-mb-sm",style:{boxShadow:"0 1px 2px rgba(0, 0, 0, 0.48)",border:t.$q.dark.isActive?"1px solid rgba(255,255,255,0.24)":"none"}},[a("q-card-section",{directives:[{name:"intersection",rawName:"v-intersection",value:t.intersect,expression:"intersect"}],staticStyle:{height:"140px"}},[a("div",{staticClass:"absolute-top-left bg-black full-width full-height overflow-hidden"},[a("img",{staticStyle:{filter:"brightness(0.7)"},attrs:{src:t.profile.avatar,width:"100%"},on:{error:t.onAvatarError}}),a("div",{staticClass:"absolute-top-left full-width full-height",staticStyle:{"box-shadow":"inset 0 0 50px rgba(0,0,0,0.8)"}})])]),a("q-card-section",{staticClass:"q-py-none q-mb-md q-pr-none flex no-wrap items-start bg-transparent relative-position",staticStyle:{height:"calc(60px + 4px)"}},[a("q-avatar",{staticClass:"q-ml-xs bg-black creator-avatar",attrs:{size:"120px"}},[t.isLoadCreatorAvatar?a("img",{attrs:{src:t.profile.avatar},on:{error:t.onCreatorAvatarError,load:t.onCreatorAvatarLoaded}}):t._e(),t.isLoadCreatorAvatar?t._e():a("q-icon",{staticStyle:{color:"#ccc"},attrs:{name:"account_circle",size:"90px"}})],1),a("div",{staticClass:"q-px-md overflow-hidden full-height full-width flex items-center justify-start"})],1),a("q-card-section",{staticClass:"q-pt-none column items-start overflow-hidden full-width"},[a("div",{staticClass:"channel-title text-h6 text-weight-bold ellipsis",staticStyle:{"max-width":"100%"},attrs:{title:t.profile.name}},[t._v("\n        "+t._s(t.profile.name)+"\n      ")]),t.profile.id?a("div",{staticClass:"flex items-center no-wrap overflow-hidden",staticStyle:{width:"fit-content","max-width":"100%"}},[a("div",{staticClass:"creator-id ellipsis col-shrink",staticStyle:{"font-size":"0.9rem"}},[a("span",[t._v("@"+t._s(t.profile.id))])]),a("q-space"),a("q-btn",{staticClass:"q-ml-sm q-pa-xs",attrs:{unelevated:"",color:"general","text-color":"general",icon:"content_copy",size:"xs",dense:""},on:{click:t.copyCreatorId}},[a("q-tooltip",[a("span",[t._v(t._s("ID: "))]),a("span",[t._v("@"+t._s(t.profile.id))])])],1),t.lib.isLibAdmin?a("q-btn",{staticClass:"q-ml-sm q-pa-xs",attrs:{unelevated:"",color:"general","text-color":"general",icon:"block",size:"xs",dense:""},on:{click:t.takedownCreator}},[a("q-tooltip",[a("span",[t._v(t._s(t.$t("takedown_user")))])])],1):t._e()],1):t._e()]),t.profile.description?a("q-card-section",{staticClass:"q-pt-none creator-section overflow-hidden"},[a("div",{staticClass:"creator-description q-mb-sm scroll-y"},[t._v(t._s(t.profile.description))])]):t._e()],1),a("div",{staticClass:"creator-flex-layout flex justify-center"},[t.filteredChannels.length?[t._l(t.filteredChannels,(function(e){return a("ChannelCard",{key:e.id,attrs:{id:e.id,title:e.title,description:e.description,image:e.image,soul:e.soul,hidden:e.hidden,followable:!t.followedIds.includes(e.id)},on:{takedown:t.takedownChannel,detail:t.showChannelDetail,follow:t.onFollow}})})),a("i"),a("i"),a("i"),a("i"),a("i"),a("i"),a("i"),a("i")]:a("div",{staticClass:"empty-placeholder full-width text-center text-subtitle1"},[a("q-icon",{attrs:{name:"help_outline"}}),a("span",{staticClass:"empty-hint q-ml-sm"},[t._v(t._s(t.$t("credit_no_data")))])],1)],2),a("BackToTop",{attrs:{show:t.showBackToTop},on:{click:t.scrollTop}})],1):t._e()},o=[],s=a("aa8a"),r=a("79ce"),l=a("1d74"),n=a("36a1"),c=a("3aea"),d=a("ef3c"),h={name:"LibraryCreator",components:{ChannelCard:r["a"],BackToTop:l["a"]},mixins:[d["a"]],data(){return{profile:{name:this.$t("loading"),id:"",avatar:"",description:""},showBackToTop:!1,isLoadCreatorAvatar:!0,lib:n["a"]}},computed:{filteredChannels(){const t=this.searchText.toLowerCase(),e=this.lib.search.option.value,a=t=>{switch(e){case"channelID":return t.id;default:return t.title}},i=i=>{var o;const s=Object(c["a"])(null===(o=a(i))||void 0===o?void 0:o.toLowerCase());return"channelID"===e&&s===t||!(i.hidden&&!n["a"].followingChannels.find((t=>t.id===i.id)))&&s.includes(t)};return this.lib.currentCreator.channels.filter((t=>n["a"].channelList.some((e=>e.id===t.id)))).filter(i)},followedIds(){return n["a"].followingChannels.map((t=>t.id))}},watch:{profile(t,e){if(t&&t.avatar!==e.avatar&&(this.isLoadCreatorAvatar=!0),t&&t.name){const e=`/library/creator?fromChannel=1&name=${encodeURIComponent(t.name)}`;this.$root.$emit("update-path",e)}},searchText(t){t&&this.active&&this.scrollTop()}},methods:{intersect(t){this.showBackToTop=!t.isIntersecting},scrollTop(){this.$refs.scrollArea.scrollTop=0},loadProfile(){this.profile={name:this.$t("loading"),id:"",avatar:"",description:""},n["a"].getUserProfile(n["a"].currentCreator.id).then((t=>{this.profile=t}))},onAvatarError(t){t.target.src="developer/platform-assets/linux/512x512.png"},onCreatorAvatarError(){this.isLoadCreatorAvatar=!1},onCreatorAvatarLoaded(t){t.target.src===this.profile.avatar&&(this.isLoadCreatorAvatar=!0)},showChannelDetail(t){const e=Object(c["c"])(t);console.log(e),this.$root.$emit("navigate-to",e),this.$router.push(e)},copyCreatorId(){Object(s["b"])(this.profile.id).then((()=>{this.$q.notify(this.$t("copied"))}))},takedown(t,e){const a=[{value:"Serious Violation",label:this.$t("serious_violation")},{value:"Copyright Disputes",label:this.$t("copyright_disputes")},{value:"Adults Only",label:this.$t("adults_only")}];this.$q.dialog({options:{model:a[0].value,type:"radio",items:a},message:this.$t("select_takedown_reason"),ok:this.$t("take_down"),cancel:this.$t("cancel")}).onOk((a=>{["Serious Violation","Copyright Disputes","Adults Only"].includes(a)&&n["a"].takedown(t,e,a).then((()=>{this.$q.notify(this.$t("success"))}))}))},takedownCreator(){if(!n["a"].currentCreator.id)return this.$q.notify("Please wait for creator loaded");this.takedown("user",n["a"].currentCreator.id)},takedownChannel(t){if(!t||20!==t.length)return this.$q.notify("Cannot parse channel id");this.takedown("channel",t)},onFollow(t){console.log("follow",t),this.followedIds.includes(t)?this.$q.dialog({title:this.$t("unfollow"),message:this.$t("unfollow_confirm"),ok:this.$t("unfollow"),cancel:this.$t("cancel")}).onOk((()=>{n["a"].unfollowChannel(t)})):n["a"].followChannel(t)},setSearch(){this.lib.setSearchOption([{label:this.$t("channel_title"),value:"channel"},{label:this.$t("channel_id"),value:"channelID"}])}},beforeRouteEnter(t,e,a){a((t=>{e.path.startsWith("/library")&&(t.setSearch(),n["a"].setCreator(n["a"].currentCreator.id))}))},mounted(){this.setSearch()},activated(){this.loadProfile()}},p=h,f=(a("878c"),a("2b5f")),u=a("e586"),v=a("d7c7"),w=a("9f3e"),C=a("f106"),m=a("990e"),b=a("1043"),g=a("cf25"),_=a("4101"),x=a("fa4f"),q=a("09a4"),y=a.n(q),$=Object(f["a"])(p,i,o,!1,null,"5975beaa",null);e["default"]=$.exports;y()($,"components",{QCard:u["a"],QCardSection:v["a"],QAvatar:w["a"],QIcon:C["a"],QSpace:m["a"],QBtn:b["a"],QTooltip:g["a"],QColor:_["a"]}),y()($,"directives",{Intersection:x["a"]})},"878c":function(t,e,a){"use strict";a("9e9b")},"9e9b":function(t,e,a){}}]);