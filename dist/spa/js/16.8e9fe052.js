(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{3961:function(t,l,o){"use strict";o.r(l);var e=function(){var t=this,l=t.$createElement,o=t._self._c||l;return o("div",{ref:"scrollEl",staticClass:"library-following row justify-center",class:{web:!t.isElectron}},[t._l(t.filteredChannels,(function(l){return o("ChannelCard",{key:l.id,attrs:{id:l.id,title:l.title,description:l.description,image:l.image,soul:l.soul,hidden:l.hidden,followers:t.lib.channelFollowerCount[l.id],followable:!1,blocked:t.blockMap[l.id]},on:{detail:t.showChannelDetail,follow:t.unfollow}})})),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),t.followings.length?t._e():o("div",{staticClass:"no-data"},[o("q-btn",{staticClass:"no-data-btn",attrs:{round:"",color:"primary","text-color":"primary",icon:"arrow_forward",size:"24px"},on:{click:t.goToExplore}},[o("q-tooltip",[t._v(t._s(t.$t("no_following"))+" "+t._s(t.$t("lib_explore")))])],1)],1),o("BackToTop",{attrs:{show:t.scrollOffset>0},on:{click:t.scrollTop}}),o("SearchChannel",{attrs:{higher:t.scrollOffset>0}})],2)},s=[],i=o("36a1"),n=o("79ce"),a=o("b80e"),r=o("018b"),c=o("1d74"),h=o("d310"),f=o("ef3c"),d=o("3aea"),u={name:"LibraryFollowing",components:{ChannelCard:n["a"],SearchChannel:a["a"],BackToTop:c["a"]},mixins:[f["a"]],data(){return{isElectron:Object(h["isElectron"])(),scrollOffset:0,lib:i["a"]}},computed:{followings(){return this.lib.followingChannels.filter((t=>!i["a"].isBannedChannel(t)&&(t.title&&t.id)))},blockMap(){const t={};return i["a"].userData&&i["a"].userData.blockChannels?(this.followings.forEach((l=>{(i["a"].userData.blockChannels.includes(l.id)||i["a"].userData.blockUsers.includes(l.creator))&&(t[l.id]=!0)})),t):t},filteredChannels(){const t=this.searchText.toLowerCase();if(!t)return this.followings;const l=i["a"].search.option.value,o=t=>{switch(l){case"channelID":return t.id;default:return t.title}},e=l=>{const e=o(l);return Object(d["a"])(null===e||void 0===e?void 0:e.toLowerCase()).includes(t)};return this.followings.filter(e)}},methods:{scrollTop(){this.$refs.scrollEl.scrollTo(0,0)},showChannelDetail(t){const l=this.followings.find((l=>l.id===t));console.log("to",l);const o=["id","title"].map((t=>{const o=l[t];return encodeURIComponent(t)+"="+encodeURIComponent(o)})).join("&"),e=`/library/channel?${o}`;this.$root.$emit("navigate-to",e),this.$router.push(e)},unfollow(t){this.$q.dialog({title:this.$t("unfollow"),message:this.$t("unfollow_confirm"),ok:this.$t("unfollow"),cancel:this.$t("cancel")}).onOk((()=>{i["a"].unfollowChannel(t)}))},goToExplore(){this.$root.$emit("navigate-to"),this.$router.push("/library/explore")},setSearch(){this.lib.setSearchOption([{label:this.$t("title"),value:"channel"},{label:this.$t("channel_id"),value:"channelID"}])}},activated(){this.setSearch(),this.$root.$emit("navigate-to"),this.$root.$emit("navigate-to","/library/following"),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.scrollTo(0,this.scrollOffset)},mounted(){this.setSearch(),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.addEventListener("scroll",Object(r["a"])((()=>{this.scrollOffset=this.$refs.scrollEl.scrollTop})))},watch:{searchText(t){t&&this.active&&this.scrollTop()}}},w=u,p=(o("3d7e"),o("2b5f")),b=o("1043"),$=o("cf25"),g=o("09a4"),C=o.n(g),m=Object(p["a"])(w,e,s,!1,null,"0a6f4e44",null);l["default"]=m.exports;C()(m,"components",{QBtn:b["a"],QTooltip:$["a"]})},"3d7e":function(t,l,o){"use strict";o("b36a")},b36a:function(t,l,o){}}]);