(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"3e18":function(t,l,e){"use strict";e.r(l);var o=function(){var t=this,l=t.$createElement,e=t._self._c||l;return e("div",{ref:"scrollEl",staticClass:"library-following row justify-center",class:{web:!t.isElectron}},[t._l(t.filteredChannels,(function(l){return e("ChannelCard",{key:l.id,attrs:{id:l.id,title:l.title,description:l.description,image:l.image,soul:l.soul,hidden:l.hidden,followers:t.lib.channelFollowerCount[l.id],followable:!1,blocked:t.blockMap[l.id]},on:{detail:t.showChannelDetail,follow:t.unfollow}})})),e("i"),e("i"),e("i"),e("i"),e("i"),e("i"),e("i"),e("i"),t.followings.length?t._e():e("div",{staticClass:"no-data"},[e("q-btn",{staticClass:"no-data-btn",attrs:{round:"",color:"primary","text-color":"primary",icon:"arrow_forward",size:"24px"},on:{click:t.goToExplore}},[e("q-tooltip",[t._v(t._s(t.$t("no_following"))+" "+t._s(t.$t("lib_explore")))])],1)],1),e("BackToTop",{attrs:{show:t.scrollOffset>0},on:{click:t.scrollTop}}),e("SearchChannel",{attrs:{higher:t.scrollOffset>0}})],2)},s=[],i=e("4aad"),n=e("5ea8"),r=e("6277"),a=e("1c16"),c=e("0ebe"),h=e("ed08"),d=e("e64e"),f={name:"LibraryFollowing",components:{ChannelCard:n["a"],SearchChannel:r["a"],BackToTop:c["a"]},mixins:[d["a"]],data(){return{isElectron:Object(h["isElectron"])(),scrollOffset:0,lib:i["a"]}},computed:{followings(){return this.lib.followingChannels.filter((t=>!i["a"].isBannedChannel(t)&&(t.title&&t.id)))},blockMap(){const t={};return i["a"].userData&&i["a"].userData.blockChannels?(this.followings.forEach((l=>{(i["a"].userData.blockChannels.includes(l.id)||i["a"].userData.blockUsers.includes(l.creator))&&(t[l.id]=!0)})),t):t},filteredChannels(){const t=this.searchText.toLowerCase();if(!t)return this.followings;const l=i["a"].search.option.value,e=t=>{switch(l){case"channelID":return t.id;default:return t.title}},o=l=>{const o=e(l);return null===o||void 0===o?void 0:o.toLowerCase().includes(t)};return this.followings.filter(o)}},methods:{scrollTop(){this.$refs.scrollEl.scrollTo(0,0)},showChannelDetail(t){const l=this.followings.find((l=>l.id===t));console.log("to",l);const e=["id","title"].map((t=>{const e=l[t];return encodeURIComponent(t)+"="+encodeURIComponent(e)})).join("&"),o=`/library/channel?${e}`;this.$root.$emit("navigate-to",o),this.$router.push(o)},unfollow(t){this.$q.dialog({title:this.$t("unfollow"),message:this.$t("unfollow_confirm"),ok:this.$t("unfollow"),cancel:this.$t("cancel")}).onOk((()=>{i["a"].unfollowChannel(t)}))},goToExplore(){this.$root.$emit("navigate-to"),this.$router.push("/library/explore")},setSearch(){this.lib.setSearchOption([{label:this.$t("title"),value:"channel"},{label:this.$t("channel_id"),value:"channelID"}])}},activated(){this.setSearch(),this.$root.$emit("navigate-to"),this.$root.$emit("navigate-to","/library/following"),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.scrollTo(0,this.scrollOffset)},mounted(){this.setSearch(),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.addEventListener("scroll",Object(a["a"])((()=>{this.scrollOffset=this.$refs.scrollEl.scrollTop})))}},u=f,w=(e("ecd9"),e("2877")),p=e("9c40"),b=e("05c0"),$=e("eebe"),g=e.n($),C=Object(w["a"])(u,o,s,!1,null,"c5d017b6",null);l["default"]=C.exports;g()(C,"components",{QBtn:p["a"],QTooltip:b["a"]})},c677:function(t,l,e){},ecd9:function(t,l,e){"use strict";e("c677")}}]);